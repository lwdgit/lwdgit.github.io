webpackJsonp([2,5],{171:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"db-breadcrumb",data:function(){return{breadcrumbs:[]}},mounted:function(){this.breadcrumbs=this.$parent&&this.$parent.$route&&this.$parent.$route.matched||[]}}},176:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(279),s=a(r),i=n(36),o=n(17);t.default={data:function(){return{saving:!1,settings:[]}},components:{breadcrumb:s.default},created:function(){this.repo=i.base.contents("_config.yml"),this.fetchSettings()},methods:{fetchSettings:function(){var e=this;return this.repo.fetch().then(function(t){var n=t.content,a=t.sha;e.originContent=o.Base64.decode(n),e.sha=a,/#start([\w\W]*?)#end/m.test(e.originContent)&&(e.content=RegExp.$1.trim(),e.parseSettings())}).catch(function(t){var n=/"message": "([^"]+)/m.test(t.message)&&RegExp.$1||t.toString();e.loading=!1,e.$message.error(n.trim())})},parseSettings:function(){var e=this;this.settings=[],this.content.replace(/^(?:([^:#\n]+):)?[ \t]*(.*)/gm,function(t,n,a){n&&e.settings.push({name:n,value:a})})},reset:function(){this.$refs.form.resetFields()},submit:function(){var e=this,t=this.originContent.replace(/#start([\w\W]*?)#end/m,"#start\n"+this.settings.map(function(e){return e.name+": "+e.value}).join("\n")+"\n#end");this.saving=!0,this.repo.add({path:"_config.yml",message:"update config",sha:this.sha,content:o.Base64.encode(t)}).then(function(){return e.saving=!1,e.$message("保存成功"),e.fetchSettings()}).catch(function(t){e.saving=!1;var n=/"message": "([^"]+)/m.test(t.message)&&RegExp.$1||t.toString();e.loading=!1,e.$message.error(n.trim())})}},computed:{majorList:function(){}}}},218:function(e,t,n){t=e.exports=n(6)(),t.push([e.id,"#big-form .el-form[data-v-6016baaa]{width:600px}#big-form .el-form .skill-line[data-v-6016baaa]{margin:10px 0}","",{version:3,sources:["/./src/pages/settings/index.vue"],names:[],mappings:"AACA,oCAAoC,WAAW,CAC9C,AACD,gDAAgD,aAAa,CAC5D",file:"index.vue",sourcesContent:["\n#big-form .el-form[data-v-6016baaa]{width:600px\n}\n#big-form .el-form .skill-line[data-v-6016baaa]{margin:10px 0\n}\n"],sourceRoot:"webpack://"}])},221:function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".db-breadcrumb-loc{float:left}","",{version:3,sources:["/./src/components/breadcrumb.vue"],names:[],mappings:"AACA,mBACE,UAAY,CACb",file:"breadcrumb.vue",sourcesContent:["\n.db-breadcrumb-loc {\n  float: left;\n}\n"],sourceRoot:"webpack://"}])},247:function(e,t,n){var a=n(218);"string"==typeof a&&(a=[[e.id,a,""]]);n(7)(a,{});a.locals&&(e.exports=a.locals)},251:function(e,t,n){var a=n(221);"string"==typeof a&&(a=[[e.id,a,""]]);n(7)(a,{});a.locals&&(e.exports=a.locals)},279:function(e,t,n){n(251);var a=n(8)(n(171),n(292),null,null);e.exports=a.exports},285:function(e,t,n){n(247);var a=n(8)(n(176),n(289),"data-v-6016baaa",null);e.exports=a.exports},289:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.saving,expression:"saving",modifiers:{body:!0}}]},[n("breadcrumb"),e._v(" "),n("br"),e._v(" "),n("div",{staticClass:"db-content-inner"},[n("el-form",{ref:"form",attrs:{"label-width":"100px"}},[e._l(this.settings,function(t){return t.name?n("el-form-item",{key:t.name,attrs:{label:t.name+" :",prop:t.name}},[n("el-input",{attrs:{placeholder:"请输入"},model:{value:t.value,callback:function(e){t.value=e},expression:"item.value"}})],1):e._e()}),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("保存")])],1)],2)],1)],1)},staticRenderFns:[]}},292:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-breadcrumb",{attrs:{separator:"/"}},[n("span",{staticClass:"db-breadcrumb-loc"},[e._v("位置：")]),e._v(" "),e._l(e.breadcrumbs,function(t){return n("el-breadcrumb-item",{attrs:{to:t}},[e._v("\n    "+e._s(t.name)+"\n  ")])})],2)},staticRenderFns:[]}}});
//# sourceMappingURL=2.1ca6aa7d55fef46e4cc8.js.map